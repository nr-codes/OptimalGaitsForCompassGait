Notebook[{

Cell[CellGroupData[{
Cell["Paper Plots", \
"Chapter",ExpressionUUID->"937fd208-c19a-4e54-9d38-6859a37ca4da"],

Cell[CellGroupData[{

Cell["Initialization", \
"Subchapter",ExpressionUUID->"f55e262a-d1ad-44ea-85bc-8a6afd0b3e4b"],

Cell[CellGroupData[{

Cell["Load Libraries", \
"Section",ExpressionUUID->"a39eed02-6642-46e9-a0c7-67a9cbbc6e76"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
     RowBox[{"core", " ", "RBD"}], " ", "&"}], " ", "NCM", " ", "library"}], 
   " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"SetDirectory", "[", 
     RowBox[{"FileNameJoin", "[", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"NotebookDirectory", "[", "]"}], ",", " ", "\"\<../../\>\""}],
        "}"}], "]"}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"<<", " ", "\"\<SIMple`\>\""}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"<<", " ", "\"\<SIMple`Additions`\>\""}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"SetDirectory", "[", 
     RowBox[{"FileNameJoin", "[", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"NotebookDirectory", "[", "]"}], ",", " ", "\"\<../\>\""}], 
       "}"}], "]"}], "]"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"<<", " ", "\"\<CompassGaitWithOptimalActuation`\>\""}], 
    ";"}]}]}]], "Input",
 CellLabel->
  "In[26]:=",ExpressionUUID->"c872a008-fd1c-4d60-83c1-89c173718e29"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Global Settings and Helper Functions", \
"Section",ExpressionUUID->"b10c372e-f1ea-4ecb-ab85-8d83c4b35be5"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"RPColor", " ", "=", " ", "BipedalLocomotion`Private`RPColor"}], 
   ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"lbmag", " ", "=", " ", "1.8"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"tickmag", " ", "=", " ", "1.2"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
   "BipedalLocomotion`CompassGait`Private`tickmag", " ", "=", " ", 
    "tickmag"}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{"for", " ", "reference"}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"scaledunits", " ", "=", " ", 
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
      "\"\<v_0\>\"", " ", "->", " ", 
       "\"\<\\\\left[\\\\frac{m}{s}/\\\\frac{L^{\\\\frac{3}{2}}}{\\\\sqrt{g}}\
\\\\right]\>\""}], ",", "\[IndentingNewLine]", 
      RowBox[{
      "\"\<\[Tau]_0\>\"", " ", "->", " ", 
       "\"\<\\\\left[s/\\\\sqrt{\\\\frac{L}{g}}\>\""}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{
      "\"\<J_0\>\"", " ", "->", " ", 
       "\"\<\\\\left[(N m)^2 s / M^2 \\\\sqrt{g^3 L^5}\>\""}]}], 
     "\[IndentingNewLine]", "}"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"f", " ", "=", " ", 
   RowBox[{
   "StringTemplate", "[", 
    "\"\<`1`, \\\\; \\\\text{`2`} \\\\; \\\\left[ \
\\\\nicefrac{\\\\unit{`3`}}{`4`} \\\\right]\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"f", " ", "=", " ", 
    RowBox[{
    "StringTemplate", "[", 
     "\"\<`1`, \\\\; \\\\text{`2`} \\\\; \\\\left[ `4` \\\\right]\>\"", 
     "]"}]}], ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"lb", " ", "=", " ", 
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
     "\"\<\\\\gamma, \\\\; \\\\text{slope} \\\\; \\\\left[ \
\\\\unit{\\\\degree} \\\\right]\>\"", ",", " ", "\[IndentingNewLine]", 
      RowBox[{"f", "[", 
       RowBox[{
       "\"\<v\>\"", ",", " ", "\"\<average speed\>\"", ",", " ", 
        "\"\<m \\\\per s\>\"", ",", " ", "\"\<v_0\>\""}], "]"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"f", "[", 
       RowBox[{
       "\"\<\\\\tau\>\"", ",", " ", "\"\<step duration\>\"", ",", " ", 
        "\"\<s\>\"", ",", " ", "\"\<t_0\>\""}], "]"}], ",", 
      "\[IndentingNewLine]", "\"\<k, \\\\; \\\\text{control points}\>\"", ",",
       " ", "\[IndentingNewLine]", 
      RowBox[{"f", "[", 
       RowBox[{
       "\"\<J\>\"", ",", " ", "\"\<cost\>\"", ",", " ", "\"\<(N.m)^2 s\>\"", 
        ",", " ", "\"\<J_0\>\""}], "]"}], ",", "\[IndentingNewLine]", 
      "\"\<\\\\nicefrac{J}{\\\\min(J)} \\\\; \\\\text{scaled cost}\>\"", ",", 
      "\[IndentingNewLine]", 
      RowBox[{"f", "[", 
       RowBox[{
       "\"\<u(t)\>\"", ",", " ", "\"\<control input\>\"", ",", " ", 
        "\"\<N.m\>\"", ",", " ", "\"\<u_0\>\""}], "]"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"f", "[", 
       RowBox[{
       "\"\<t\>\"", ",", " ", "\"\<time\>\"", ",", " ", "\"\<s\>\"", ",", 
        " ", "\"\<t_0\>\""}], "]"}], ",", "\[IndentingNewLine]", 
      RowBox[{"f", "[", 
       RowBox[{
       "\"\<\\\\min(J)\>\"", ",", " ", "\"\<cost\>\"", ",", " ", 
        "\"\<(N.m)^2 s\>\"", ",", " ", "\"\<J_0\>\""}], "]"}]}], 
     "\[IndentingNewLine]", "}"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"lb", " ", "=", "  ", 
    RowBox[{"AssociationThread", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "\"\<\[Sigma]\>\"", ",", " ", "\"\<v\>\"", ",", " ", "\"\<\[Tau]\>\"", 
        ",", " ", "\"\<n\>\"", ",", " ", "\"\<J\>\"", ",", " ", 
        "\"\<J/minJ\>\"", ",", " ", "\"\<uhip\>\"", ",", " ", "\"\<t\>\"", 
        ",", " ", "\"\<minJ\>\""}], "}"}], " ", "->", " ", 
      RowBox[{"BLTeX", "[", 
       RowBox[{"lb", ",", " ", "lbmag", ",", " ", "\"\<nicefrac\>\""}], 
       "]"}]}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"col", " ", "=", " ", 
   RowBox[{"BLLaTex", "[", "\"\<column width\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"full", " ", "=", " ", 
    RowBox[{"BLLaTex", "[", "\"\<text width\>\"", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"Attributes", "[", "mag", "]"}], " ", "=", " ", 
   RowBox[{"{", "Listable", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"mag", "[", 
    RowBox[{"g_", ",", " ", "d_"}], "]"}], " ", ":=", " ", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "s", "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"s", " ", "=", " ", 
       RowBox[{"ImageSize", " ", "/.", " ", 
        RowBox[{"Options", "[", 
         RowBox[{"g", ",", " ", "ImageSize"}], "]"}]}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"Show", "[", 
       RowBox[{"g", ",", " ", 
        RowBox[{"ImageSize", " ", "->", " ", 
         RowBox[{"s", " ", "d"}]}]}], "]"}]}]}], "\[IndentingNewLine]", 
    "]"}]}], ";"}]}], "Input",
 CellLabel->"In[31]:=",ExpressionUUID->"ddbfba66-ca0b-4608-8698-676ca5080362"],

Cell[CellGroupData[{

Cell["callout formats", \
"Subsection",ExpressionUUID->"8c47a30f-b322-46a8-a332-26bb510ba2c6"],

Cell["\<\
https://tex.stackexchange.com/questions/7032/good-way-to-make-textcircled-\
numbers

https://tex.stackexchange.com/questions/24434/how-to-specify-a-fill-color-in-\
rgb-format-in-a-node-in-tikzpicture\
\>", "Text",ExpressionUUID->"d99ba85c-2ac0-4122-8bd3-742dd3ae6be1"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
   "circtikz", " ", "=", " ", 
    "\"\<\\\\tikz[baseline=(char.base)]{\n    \
\\\\node[shape=circle,draw={rgb,1:red,`2`;green,`3`;blue,`4`},inner sep=2pt, \
fill=white] (char) {`1`};}\>\""}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
   "passtikz", " ", "=", " ", 
    "\"\<\\\\tikz[baseline=(char.base)]{\n    \
\\\\node[shape=circle,draw={rgb,1:red,`2`;green,`3`;blue,`4`},thick,inner \
sep=2pt, fill=white] (char) {`1`};}\>\""}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"texcirc", "[", 
     RowBox[{"i_", ",", " ", "c_"}], "]"}], " ", ":=", " ", 
    RowBox[{"texcirc", "[", 
     RowBox[{"i", ",", " ", 
      RowBox[{"List", "@@", 
       RowBox[{"ColorConvert", "[", 
        RowBox[{"c", ",", " ", "\"\<RGB\>\""}], "]"}]}]}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"texcirc", "[", 
     RowBox[{"i_", ",", " ", 
      RowBox[{"{", 
       RowBox[{"r_", ",", " ", "g_", ",", " ", "b_"}], "}"}]}], "]"}], " ", ":=",
     " ", 
    RowBox[{"BLTeX", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"StringTemplate", "[", "circtikz", "]"}], "[", 
       RowBox[{"i", ",", " ", "r", ",", " ", "g", ",", " ", "b"}], "]"}], ",",
       " ", "tickmag", ",", " ", "\"\<tikz\>\""}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"cpass", "[", 
     RowBox[{"i_", ",", " ", "c_"}], "]"}], " ", ":=", " ", 
    RowBox[{"cpass", "[", 
     RowBox[{"i", ",", " ", 
      RowBox[{"List", "@@", 
       RowBox[{"ColorConvert", "[", 
        RowBox[{"c", ",", " ", "\"\<RGB\>\""}], "]"}]}]}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"cpass", "[", 
     RowBox[{"i_", ",", " ", 
      RowBox[{"{", 
       RowBox[{"r_", ",", " ", "g_", ",", " ", "b_"}], "}"}]}], "]"}], " ", ":=",
     " ", 
    RowBox[{"BLTeX", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"StringTemplate", "[", 
        RowBox[{
        "\"\<\\\\underset{\\\\text{passive gait}}{\>\"", "  ", "<>", " ", 
         "passtikz", " ", "<>", " ", "\"\<}\>\""}], "]"}], "[", 
       RowBox[{"i", ",", " ", "r", ",", " ", "g", ",", " ", "b"}], "]"}], ",",
       " ", "tickmag", ",", " ", "\"\<tikz\>\""}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"cseed", "[", 
     RowBox[{"i_", ",", " ", "c_"}], "]"}], " ", ":=", " ", 
    RowBox[{"cseed", "[", 
     RowBox[{"i", ",", " ", 
      RowBox[{"List", "@@", 
       RowBox[{"ColorConvert", "[", 
        RowBox[{"c", ",", " ", "\"\<RGB\>\""}], "]"}]}]}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"cseed", "[", 
     RowBox[{"i_", ",", " ", 
      RowBox[{"{", 
       RowBox[{"r_", ",", " ", "g_", ",", " ", "b_"}], "}"}]}], "]"}], " ", ":=",
     " ", 
    RowBox[{"BLTeX", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"StringTemplate", "[", 
        RowBox[{
        "\"\<\\\\underset{\\\\substack{\\\\text{passive gait} \\\\\\\\ \
\\\\text{(seed value)}}}{\>\"", "  ", "<>", " ", "passtikz", " ", "<>", " ", 
         "\"\<}\>\""}], "]"}], "[", 
       RowBox[{"i", ",", " ", "r", ",", " ", "g", ",", " ", "b"}], "]"}], ",",
       " ", "tickmag", ",", " ", "\"\<tikz\>\""}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"callout", "[", 
    RowBox[{"i_List", ",", " ", "copts_"}], "]"}], " ", ":=", " ", 
   RowBox[{"MapThread", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"callout", "[", 
       RowBox[{"#1", ",", " ", "i", ",", " ", 
        RowBox[{"Sequence", "@@", "#2"}]}], "]"}], "&"}], ",", " ", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"Range", "@", 
        RowBox[{"Length", "@", "points"}]}], ",", " ", "copts"}], "}"}]}], 
    "]"}]}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"callout", "[", 
    RowBox[{"k_Integer", ",", " ", "i_", ",", " ", "r___"}], "]"}], " ", ":=",
    " ", 
   RowBox[{"Callout", "[", 
    RowBox[{
     RowBox[{"Style", "[", 
      RowBox[{
       RowBox[{"points", "\[LeftDoubleBracket]", 
        RowBox[{"k", ",", " ", "i"}], "\[RightDoubleBracket]"}], ",", " ", 
       RowBox[{
       "gaitcolors", "\[LeftDoubleBracket]", "k", "\[RightDoubleBracket]"}]}],
       "]"}], ",", " ", 
     RowBox[{
     "gaitlbls", "\[LeftDoubleBracket]", "k", "\[RightDoubleBracket]"}], ",", 
     " ", "r", ",", " ", 
     RowBox[{"Background", "\[Rule]", "None"}]}], "]"}]}], ";"}]}], "Input",
 CellLabel->
  "In[44]:=",ExpressionUUID->"7ed7d7d1-92d7-45d9-acc0-2746b3cc69b1"]
}, Open  ]],

Cell[CellGroupData[{

Cell["data set manipulation", \
"Subsection",ExpressionUUID->"4f9154a5-0644-4e2b-a11c-08104c20d27e"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"in", " ", "=", " ", 
    RowBox[{"Function", "[", 
     RowBox[{"x", ",", " ", 
      RowBox[{
       RowBox[{"Position", "[", 
        RowBox[{"indices", ",", " ", "x"}], "]"}], "\[LeftDoubleBracket]", 
       RowBox[{"1", ",", " ", "1"}], "\[RightDoubleBracket]"}], ",", " ", 
      "Listable"}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"qnc", "[", 
    RowBox[{"cost_", ",", " ", "palette_"}], "]"}], " ", ":=", " ", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "qnts", ",", " ", "f", ",", " ", "bins", ",", " ", "n", ",", " ", "x"}],
       "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"n", " ", "=", " ", 
       RowBox[{"Length", "@", "palette"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"qnts", " ", "=", " ", 
       RowBox[{"Quantile", "[", 
        RowBox[{"cost", ",", " ", 
         RowBox[{"N", "@", 
          RowBox[{"Rest", "@", 
           RowBox[{"Subdivide", "[", 
            RowBox[{"0", ",", " ", "1", ",", " ", "n"}], "]"}]}]}]}], "]"}]}],
       ";", "\[IndentingNewLine]", 
      RowBox[{"bins", " ", "=", " ", 
       RowBox[{"Join", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"-", "\[Infinity]"}], "}"}], ",", " ", "qnts"}], "]"}]}], 
      ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"f", " ", "=", " ", 
       RowBox[{"AssociationThread", "[", 
        RowBox[{
         RowBox[{"Range", "[", "n", "]"}], " ", "->", " ", "palette"}], 
        "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"f", " ", "=", " ", 
       RowBox[{"Piecewise", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"{", 
           RowBox[{
            RowBox[{"f", "@", "#"}], ",", " ", 
            RowBox[{
             RowBox[{
             "bins", "\[LeftDoubleBracket]", "#", "\[RightDoubleBracket]"}], 
             " ", "<", "  ", "x", " ", "<=", " ", 
             RowBox[{"bins", "\[LeftDoubleBracket]", 
              RowBox[{"#", " ", "+", " ", "1"}], 
              "\[RightDoubleBracket]"}]}]}], "}"}], "&"}], " ", "/@", " ", 
         RowBox[{"Range", "[", "n", "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"f", " ", "=", " ", 
       RowBox[{
        RowBox[{"Evaluate", "[", 
         RowBox[{"f", " ", "/.", " ", 
          RowBox[{"x", " ", "->", " ", "#"}]}], "]"}], "&"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"qnts", ",", " ", "f"}], "}"}]}]}], "\[IndentingNewLine]", 
    "]"}]}], ";"}]}], "Input",
 CellLabel->"In[54]:=",ExpressionUUID->"7caff6c7-1738-4d94-924d-9c090f47b18e"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"getslice", "[", 
     RowBox[{"f_", ",", " ", "i_", ",", " ", 
      RowBox[{"palette_", ":", " ", "palette"}]}], "]"}], " ", ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "csv", ",", " ", "src", ",", " ", "slice", ",", " ", "cost", ",", " ", 
        "q", ",", " ", "cf", ",", " ", "c", ",", " ", "shade", ",", " ", 
        "l"}], "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{
       "we", " ", "assume", " ", "f", " ", "is", " ", "a", " ", "pattern", 
        " ", "of", " ", "all", " ", "files", " ", "that", " ", "define", " ", 
        "a", " ", "slice", " ", "of", " ", "continuous", " ", "pts"}], " ", 
       "*)"}], "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"csv", " ", "=", " ", 
        RowBox[{"FindCSVFile", "[", 
         RowBox[{"f", ",", " ", "\"\<csv\>\""}], "]"}]}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{"raw", " ", "data"}], " ", "*)"}], "\[IndentingNewLine]", 
       RowBox[{"src", " ", "=", " ", 
        RowBox[{"KeySort", "[", 
         RowBox[{"Join", "@@", 
          RowBox[{"(", 
           RowBox[{
            RowBox[{
             RowBox[{"ConvertCSV", "[", 
              RowBox[{"#", ",", " ", "None", ",", " ", "0"}], "]"}], "&"}], 
            " ", "/@", " ", "csv"}], ")"}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{"formatted", " ", "data"}], " ", "*)"}], 
       "\[IndentingNewLine]", 
       RowBox[{"slice", " ", "=", " ", 
        RowBox[{"Join", "@@", 
         RowBox[{"GetGaitParameters", "[", 
          RowBox[{"src", ",", " ", 
           RowBox[{"\"\<i\>\"", " ", "->", "  ", "indices"}]}], "]"}]}]}], 
       ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{"cost", " ", "stats"}], " ", "*)"}], "\[IndentingNewLine]", 
       RowBox[{"cost", " ", "=", " ", 
        RowBox[{"Flatten", "@", 
         RowBox[{"slice", "\[LeftDoubleBracket]", 
          RowBox[{"1", ",", " ", "All", ",", " ", 
           RowBox[{"in", "[", "\"\<J\>\"", "]"}]}], 
          "\[RightDoubleBracket]"}]}]}], ";", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"{", 
         RowBox[{"q", ",", " ", "cf"}], "}"}], " ", "=", " ", 
        RowBox[{"qnc", "[", 
         RowBox[{"cost", ",", " ", "palette"}], "]"}]}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"(*", " ", 
        RowBox[{"shaded", " ", "curve"}], " ", "*)"}], "\[IndentingNewLine]", 
       
       RowBox[{"c", " ", "=", " ", 
        RowBox[{"cf", "/@", " ", "cost"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"shade", " ", "=", " ", 
        RowBox[{"<|", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"\"\<\[Tau]\>\"", " ", "->", " ", 
           RowBox[{"Line", "[", 
            RowBox[{
             RowBox[{"slice", "\[LeftDoubleBracket]", 
              RowBox[{"1", ",", " ", "All", ",", " ", 
               RowBox[{"{", 
                RowBox[{"i", ",", " ", 
                 RowBox[{"in", "[", "\"\<\[Tau]\>\"", "]"}]}], "}"}]}], 
              "\[RightDoubleBracket]"}], ",", 
             RowBox[{"VertexColors", "->", "c"}]}], "]"}]}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"\"\<J\>\"", " ", "->", " ", 
           RowBox[{"Line", "[", 
            RowBox[{
             RowBox[{"slice", "\[LeftDoubleBracket]", 
              RowBox[{"1", ",", " ", "All", ",", " ", 
               RowBox[{"{", 
                RowBox[{"i", ",", " ", 
                 RowBox[{"in", "[", "\"\<J\>\"", "]"}]}], "}"}]}], 
              "\[RightDoubleBracket]"}], ",", 
             RowBox[{"VertexColors", "->", "c"}]}], "]"}]}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"\"\<3D\>\"", " ", "->", " ", 
           RowBox[{"Line", "[", 
            RowBox[{
             RowBox[{"slice", "\[LeftDoubleBracket]", 
              RowBox[{"1", ",", " ", "All", ",", " ", 
               RowBox[{"in", "[", 
                RowBox[{"{", 
                 RowBox[{
                 "\"\<\[Sigma]\>\"", ",", " ", "\"\<v\>\"", ",", " ", 
                  "\"\<\[Tau]\>\""}], "}"}], "]"}]}], 
              "\[RightDoubleBracket]"}], ",", 
             RowBox[{"VertexColors", "->", "c"}]}], "]"}]}]}], 
         "\[IndentingNewLine]", "|>"}]}], ";", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", 
       RowBox[{"(*", " ", "legend", " ", "*)"}], "\[IndentingNewLine]", 
       RowBox[{"l", " ", "=", " ", 
        RowBox[{
        "StringTemplate", "[", 
         "\"\<\\\\underset{(`1` \\\\% )}{J \\\\leq `2`}\>\"", "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"l", " ", "=", " ", 
        RowBox[{"MapIndexed", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"l", "[", 
            RowBox[{
             RowBox[{"100", " ", 
              RowBox[{
               RowBox[{
               "#2", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}], 
               "/", 
               RowBox[{"Length", "@", "q"}]}]}], ",", " ", 
             RowBox[{"NumberForm", "[", 
              RowBox[{"#1", ",", " ", 
               RowBox[{"{", 
                RowBox[{"3", ",", "3"}], "}"}]}], "]"}]}], "]"}], "&"}], ",", 
          " ", "q"}], "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"l", " ", "=", " ", 
        RowBox[{"SwatchLegend", "[", "\[IndentingNewLine]", 
         RowBox[{"palette", ",", " ", "\[IndentingNewLine]", 
          RowBox[{"BLTeX", "[", 
           RowBox[{"l", ",", " ", 
            RowBox[{"0.8", "tickmag"}]}], "]"}], ",", " ", 
          "\[IndentingNewLine]", 
          RowBox[{"LegendLabel", "\[Rule]", " ", 
           RowBox[{"BLTeX", "[", 
            RowBox[{
            "\"\<\\\\text{Cost } J \\\\text{ Quartiles}\>\"", ",", " ", 
             RowBox[{"0.9", "tickmag"}]}], "]"}]}], ",", " ", 
          "\[IndentingNewLine]", 
          RowBox[{"LegendFunction", "\[Rule]", "Framed"}], ",", " ", 
          "\[IndentingNewLine]", 
          RowBox[{"LegendLayout", "\[Rule]", "\"\<Row\>\""}]}], 
         "\[IndentingNewLine]", "]"}]}], ";", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", 
       RowBox[{"<|", 
        RowBox[{
         RowBox[{"\"\<slice\>\"", " ", "->", " ", "slice"}], ",", " ", 
         RowBox[{"\"\<src\>\"", " ", "->", " ", "src"}], ",", " ", 
         "\[IndentingNewLine]", 
         RowBox[{"\"\<qnts\>\"", " ", "->", " ", "q"}], ",", " ", 
         RowBox[{"\"\<cf\>\"", " ", "->", " ", "cf"}], ",", " ", 
         RowBox[{"\"\<shade\>\"", " ", "->", " ", "shade"}], ",", " ", 
         RowBox[{"\"\<legend\>\"", " ", "->", " ", "l"}]}], "|>"}]}]}], 
     "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
  "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"http", ":"}], "//", 
    RowBox[{
     RowBox[{"paletton", ".", "com"}], "/"}]}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"palette", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"RGBColor", "[", 
      RowBox[{"0.357", ",", "0.855", ",", "0.392"}], "]"}], ",", " ", 
     RowBox[{"RGBColor", "[", 
      RowBox[{"0.475", ",", "0.384", ",", "0.788"}], "]"}], ",", " ", 
     RowBox[{"RGBColor", "[", 
      RowBox[{"1", ",", "0.898", ",", "0.42"}], "]"}], ",", " ", 
     RowBox[{"RGBColor", "[", 
      RowBox[{"1", ",", "0.431", ",", "0.42"}], "]"}]}], "}"}]}], 
  ";"}]}], "Input",
 CellLabel->"In[56]:=",ExpressionUUID->"8e5b40ee-a84c-441d-b418-4a910f02c393"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Attributes", "[", "summarize", "]"}], " ", "=", " ", 
   RowBox[{"{", "HoldAll", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"summarize", "[", "slice_", "]"}], " ", ":=", " ", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "n", ",", " ", "s", ",", " ", "v", ",", " ", "t", ",", " ", "q"}], 
      "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"s", " ", "=", " ", 
       RowBox[{"MinMax", "@", 
        RowBox[{"slice", "\[LeftDoubleBracket]", 
         RowBox[{"\"\<slice\>\"", ",", " ", "1", ",", " ", "All", ",", " ", 
          RowBox[{"in", "[", "\"\<\[Sigma]\>\"", "]"}]}], 
         "\[RightDoubleBracket]"}]}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"v", " ", "=", " ", 
       RowBox[{"MinMax", "@", 
        RowBox[{"slice", "\[LeftDoubleBracket]", 
         RowBox[{"\"\<slice\>\"", ",", " ", "1", ",", " ", "All", ",", " ", 
          RowBox[{"in", "[", "\"\<v\>\"", "]"}]}], 
         "\[RightDoubleBracket]"}]}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"t", " ", "=", " ", 
       RowBox[{"MinMax", "@", 
        RowBox[{"slice", "\[LeftDoubleBracket]", 
         RowBox[{"\"\<slice\>\"", ",", " ", "1", ",", " ", "All", ",", " ", 
          RowBox[{"in", "[", "\"\<\[Tau]\>\"", "]"}]}], 
         "\[RightDoubleBracket]"}]}]}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"s", " ", "=", " ", 
       RowBox[{"Append", "[", 
        RowBox[{"s", ",", " ", 
         RowBox[{"slice", "\[LeftDoubleBracket]", 
          RowBox[{"\"\<slice\>\"", ",", " ", "2", ",", " ", 
           RowBox[{"in", "[", "\"\<\[Sigma]\>\"", "]"}]}], 
          "\[RightDoubleBracket]"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"v", " ", "=", " ", 
       RowBox[{"Append", "[", 
        RowBox[{"v", ",", " ", 
         RowBox[{"slice", "\[LeftDoubleBracket]", 
          RowBox[{"\"\<slice\>\"", ",", " ", "2", ",", " ", 
           RowBox[{"in", "[", "\"\<v\>\"", "]"}]}], 
          "\[RightDoubleBracket]"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"t", " ", "=", " ", 
       RowBox[{"Append", "[", 
        RowBox[{"t", ",", " ", 
         RowBox[{"slice", "\[LeftDoubleBracket]", 
          RowBox[{"\"\<slice\>\"", ",", " ", "2", ",", " ", 
           RowBox[{"in", "[", "\"\<\[Tau]\>\"", "]"}]}], 
          "\[RightDoubleBracket]"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"n", " ", "=", " ", 
       RowBox[{"StringTemplate", "[", "\"\<`1` (`2` points)\>\"", "]"}]}], 
      ";", "\[IndentingNewLine]", 
      RowBox[{"n", " ", "=", " ", 
       RowBox[{"n", "[", 
        RowBox[{
         RowBox[{"ToString", "@", 
          RowBox[{"Unevaluated", "@", "slice"}]}], ",", " ", 
         RowBox[{"Length", "@", 
          RowBox[{"slice", "\[LeftDoubleBracket]", 
           RowBox[{"\"\<slice\>\"", ",", " ", "1"}], 
           "\[RightDoubleBracket]"}]}]}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"q", " ", "=", " ", 
       RowBox[{"Length", "@", 
        RowBox[{"slice", "[", "\"\<qnts\>\"", "]"}]}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"Labeled", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Column", "[", 
         RowBox[{"{", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"TableForm", "[", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{"s", ",", " ", "v", ",", " ", "t"}], "}"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{"TableHeadings", "\[Rule]", " ", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"indices", "\[LeftDoubleBracket]", 
                 RowBox[{"1", ";;", "3"}], "\[RightDoubleBracket]"}], ",", 
                " ", 
                RowBox[{"{", 
                 RowBox[{
                 "\"\<min\>\"", ",", " ", "\"\<max\>\"", ",", " ", 
                  "\"\<seed\>\""}], "}"}]}], "}"}]}]}], "\[IndentingNewLine]",
             "]"}], ",", "\[IndentingNewLine]", 
           RowBox[{"TableForm", "[", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{"slice", "[", "\"\<qnts\>\"", "]"}], "}"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{"TableHeadings", "\[Rule]", " ", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"{", "\"\<q\>\"", "}"}], ",", " ", 
                RowBox[{
                 RowBox[{
                  RowBox[{"Range", "@", "q"}], "/", "q"}], " ", "100"}]}], 
               "}"}]}]}], "\[IndentingNewLine]", "]"}]}], 
          "\[IndentingNewLine]", "}"}], "]"}], ",", "\[IndentingNewLine]", 
        "n", ",", " ", "Top"}], "\[IndentingNewLine]", "]"}]}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}]}], "Input",
 CellLabel->
  "In[58]:=",ExpressionUUID->"cd4df956-fe21-4ef6-b175-53ae3eca0268"]
}, Open  ]],

Cell[CellGroupData[{

Cell["image formats", \
"Subsection",ExpressionUUID->"c651b230-7d1e-4042-8952-3298d5627f84"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{"!", 
      RowBox[{"DirectoryQ", "[", 
       RowBox[{"BLPath", "[", 
        RowBox[{"\"\<Here\>\"", ",", " ", "\"\<plots\>\""}], "]"}], "]"}]}], 
     ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"CreateDirectory", "[", 
       RowBox[{"BLPath", "[", 
        RowBox[{"\"\<Here\>\"", ",", " ", "\"\<plots\>\""}], "]"}], "]"}], 
      ";"}]}], "\[IndentingNewLine]", "]"}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"gsave", "[", 
    RowBox[{"f_", ",", " ", "g_"}], "]"}], " ", ":=", " ", 
   RowBox[{"BLExportTo", "[", 
    RowBox[{"\"\<Here\>\"", ",", " ", 
     RowBox[{"FileNameJoin", "[", 
      RowBox[{"{", 
       RowBox[{"\"\<plots\>\"", ",", " ", "f"}], "}"}], "]"}], ",", " ", 
     "g"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"svgsave", "[", 
    RowBox[{"f_", ",", " ", "g_"}], "]"}], " ", ":=", " ", 
   RowBox[{"gsave", "[", 
    RowBox[{
     RowBox[{"f", " ", "<>", " ", "\"\<.svg\>\""}], ",", " ", "g"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"pngsave", "[", 
    RowBox[{"f_", ",", " ", "g_"}], "]"}], " ", ":=", " ", 
   RowBox[{"gsave", "[", 
    RowBox[{
     RowBox[{"f", " ", "<>", " ", "\"\<.png\>\""}], ",", " ", "g"}], "]"}]}], 
  ";"}]}], "Input",
 CellLabel->
  "In[60]:=",ExpressionUUID->"c79efb12-cd14-42ba-a5b9-edf314cf83b1"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Primary Data", \
"Section",ExpressionUUID->"0c64aace-edc2-4f43-a06b-b38e2e127698"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"indices", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{
    "\"\<\[Sigma]\>\"", ",", " ", "\"\<v\>\"", ",", " ", "\"\<\[Tau]\>\"", 
     ",", " ", "\"\<J\>\""}], "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"s", " ", "=", " ", 
    RowBox[{"{", 
     RowBox[{"5", ",", " ", "6", ",", " ", 
      RowBox[{"-", "1"}], ",", " ", "7"}], "}"}]}], ";"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{
     RowBox[{"load", " ", 
      RowBox[{"model", ":", " ", "\"\<e\>\""}]}], " ", "->", " ", 
     RowBox[{"elbow", " ", "actuation", " ", "joint"}]}], ",", " ", 
    RowBox[{"\"\<d\>\"", " ", "->", " ", 
     RowBox[{
     "#", " ", "of", " ", "derivatives", " ", "to", " ", "compute"}]}]}], " ",
    "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"CompassGait", "[", 
    RowBox[{
     RowBox[{"\"\<e\>\"", " ", "->", " ", 
      RowBox[{"{", 
       RowBox[{"Fourier", ",", " ", "2"}], "}"}]}], ",", " ", 
     RowBox[{"\"\<d\>\"", " ", "->", " ", "0"}]}], "]"}], ";"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{"load", " ", "slices"}], " ", "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pslice1", " ", "=", " ", 
   RowBox[{"getslice", "[", 
    RowBox[{"\"\<g1_passive_Z_F_2_Z\>\"", ",", " ", 
     RowBox[{"in", "[", "\"\<\[Sigma]\>\"", "]"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pslice2", " ", "=", " ", 
   RowBox[{"getslice", "[", 
    RowBox[{"\"\<g2_passive_Z_F_2_Z\>\"", ",", " ", 
     RowBox[{"in", "[", "\"\<\[Sigma]\>\"", "]"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"vslice", " ", "=", " ", 
   RowBox[{"getslice", "[", 
    RowBox[{"\"\<g1_f_v_0.7_*_Z_F_2_Z\>\"", ",", " ", 
     RowBox[{"in", "[", "\"\<\[Sigma]\>\"", "]"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"\[Sigma]slice", " ", "=", " ", 
    RowBox[{"getslice", "[", 
     RowBox[{"\"\<g1_f_\[Sigma]_0_*_Z_F_2_Z\>\"", ",", " ", 
      RowBox[{"in", "[", "\"\<v\>\"", "]"}]}], "]"}]}], ";"}], 
  "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{"useful", " ", "plot", " ", "options"}], " ", 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"opts2D", " ", "=", " ", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"PlotRange", "\[Rule]", "All"}], ",", "\[IndentingNewLine]", 
     RowBox[{"PlotStyle", "\[Rule]", 
      RowBox[{"Directive", "[", "Black", "]"}]}], ",", "\[IndentingNewLine]", 
     
     RowBox[{"Axes", " ", "->", " ", "False"}], ",", "\[IndentingNewLine]", 
     RowBox[{"AspectRatio", "\[Rule]", " ", 
      RowBox[{"1", "/", "3"}]}], ",", "\[IndentingNewLine]", 
     RowBox[{"ImageSize", "\[Rule]", " ", "full"}]}], "\[IndentingNewLine]", 
    "}"}]}], ";"}]}], "Input",
 CellLabel->"In[64]:=",ExpressionUUID->"8c2d9751-8e14-4fcb-b73c-ca14305cc0b0"],

Cell[CellGroupData[{

Cell["summarize fine data", \
"Subsection",ExpressionUUID->"dd02f6b9-116b-49e8-a1c9-17e182bfc3b3"],

Cell[BoxData[{
 RowBox[{"summarize", "[", "vslice", "]"}], "\[IndentingNewLine]", 
 RowBox[{"summarize", "[", "\[Sigma]slice", "]"}]}], "Input",
 CellLabel->
  "In[72]:=",ExpressionUUID->"8aae0be2-3b2d-4b97-b73b-504caaf20736"]
}, Open  ]],

Cell[CellGroupData[{

Cell["summarize coarse data", \
"Subsection",ExpressionUUID->"ffcbae50-6284-4586-ad5c-f83a1525ea8a"],

Cell[BoxData[{
 RowBox[{"summarize", "[", "pslice1", "]"}], "\[IndentingNewLine]", 
 RowBox[{"summarize", "[", "pslice2", "]"}], "\[IndentingNewLine]", 
 RowBox[{"summarize", "@", 
  RowBox[{"getslice", "[", 
   RowBox[{"\"\<g1_v_0.7_*_Z_F_2_Z\>\"", ",", " ", 
    RowBox[{"in", "[", "\"\<\[Sigma]\>\"", "]"}]}], 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"summarize", "@", 
  RowBox[{"getslice", "[", 
   RowBox[{"\"\<g1_\[Sigma]_0_*_Z_F_2_Z\>\"", ",", " ", 
    RowBox[{"in", "[", "\"\<\[Sigma]\>\"", "]"}]}], "]"}]}]}], "Input",
 CellLabel->
  "In[74]:=",ExpressionUUID->"6f12d4b9-629f-4cbb-a513-688673e0126f"]
}, Open  ]]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Draw Biped", \
"Subchapter",ExpressionUUID->"a33c64c4-00d5-49d0-a61d-3407002cee67"],

Cell["\<\
The \[OpenCurlyDoubleQuote]left\[CloseCurlyDoubleQuote] leg is dark gray.  \
These components are used in plots/model.svg.  The file was created in \
Inkscape.\
\>", "Text",ExpressionUUID->"a6308e31-a80b-47cf-9ff9-146fedf77226"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"c", " ", "=", " ", 
   RowBox[{"ConstantArray", "[", 
    RowBox[{"0", ",", " ", "nd"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"\[Sigma]", " ", "=", " ", 
   RowBox[{
    RowBox[{"-", "20"}], "Degree"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"c", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}], " ", 
   "=", " ", 
   RowBox[{"20", " ", "Degree"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"c", "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}], " ", 
   "=", " ", 
   RowBox[{"2", 
    RowBox[{"(", 
     RowBox[{"\[Sigma]", "-", 
      RowBox[{"c", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]}], 
     ")"}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"c", "\[LeftDoubleBracket]", 
    RowBox[{"-", "1"}], "\[RightDoubleBracket]"}], " ", "=", " ", "1"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"BLWrap", "[", 
   RowBox[{
    RowBox[{
     RowBox[{"BLDrawBiped", "[", 
      RowBox[{"##", ",", " ", 
       RowBox[{"\"\<\[CurlyPhi]\>\"", " ", "->", " ", 
        RowBox[{"Flatten", "@", "#2"}]}]}], "]"}], "&"}], ",", " ", "c"}], 
   "]"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{"BLTeX", "[", 
  RowBox[{"{", 
   RowBox[{
   "\"\<q_1\>\"", ",", " ", "\"\<-q_2\>\"", ",", " ", "\"\<-\\\\gamma\>\"", 
    ",", " ", "\"\<g\>\"", ",", " ", "\"\<(x, y)\>\"", ",", " ", 
    "\"\<x_w\>\"", ",", " ", "\"\<y_w\>\"", ",", " ", 
    "\"\<v_\\\\text{avg}\>\"", ",", " ", "\"\<a\>\"", ",", " ", "\"\<b\>\"", 
    ",", " ", "\"\<\\\\ell_0\>\"", ",", " ", "\"\<m_H\>\"", ",", " ", 
    "\"\<m_\\\\ell\>\""}], "}"}], "]"}]}], "Input",
 CellLabel->
  "In[78]:=",ExpressionUUID->"26f52e6d-c11c-44d9-b0ca-b821e98d730f"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Constant-Velocity", \
"Subchapter",ExpressionUUID->"20dc9128-ecbc-4d09-b416-6231b04ef952"],

Cell[CellGroupData[{

Cell["slice-specific data", \
"Section",ExpressionUUID->"d07242aa-73fb-45d7-9ee5-fc9f957077fe"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"downhill", " ", 
    RowBox[{"(", "passive", ")"}], " ", 
    RowBox[{"gaits", ":", " ", 
     RowBox[{
     "there", " ", "are", " ", "two", " ", "passive", " ", "gaits", " ", "in",
       " ", "this", " ", "slice"}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"watch", " ", 
     RowBox[{"out", "!"}], " ", "the", " ", "indices", " ", "are", " ", 
     "hard"}], "-", 
    RowBox[{"coded", " ", "based", " ", "on", " ", "step", " ", "size"}]}], 
   " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"passive", " ", "=", " ", 
     RowBox[{
      RowBox[{"SortGaits", "[", 
       RowBox[{
        RowBox[{"vslice", "[", "\"\<src\>\"", "]"}], ",", " ", 
        RowBox[{
         RowBox[{"#", "\[LeftDoubleBracket]", 
          RowBox[{"\"\<c\>\"", ",", " ", "1", ",", " ", "7"}], 
          "\[RightDoubleBracket]"}], "&"}]}], "]"}], "\[LeftDoubleBracket]", 
      RowBox[{"1", ";;", "2"}], "\[RightDoubleBracket]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"uphill", " ", "gaits"}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"des", " ", "=", " ", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Min", "@", 
         RowBox[{
          RowBox[{"vslice", "[", "\"\<slice\>\"", "]"}], 
          "\[LeftDoubleBracket]", 
          RowBox[{"1", ",", " ", "All", ",", " ", 
           RowBox[{"in", "[", "\"\<\[Sigma]\>\"", "]"}]}], 
          "\[RightDoubleBracket]"}]}], "-", "180"}], ")"}], "/", "2"}]}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"uphill", " ", "=", " ", 
     RowBox[{"Join", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"SortGaits", "[", 
         RowBox[{
          RowBox[{"vslice", "[", "\"\<src\>\"", "]"}], ",", " ", 
          RowBox[{
           RowBox[{"Abs", "[", 
            RowBox[{
             RowBox[{"#", "\[LeftDoubleBracket]", 
              RowBox[{"\"\<c\>\"", ",", " ", "1", ",", " ", "5"}], 
              "\[RightDoubleBracket]"}], " ", "-", " ", 
             RowBox[{"des", " ", "Degree"}]}], " ", "]"}], "&"}]}], "]"}], 
        "\[LeftDoubleBracket]", 
        RowBox[{"1", ";;", "1"}], "\[RightDoubleBracket]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"SortGaits", "[", 
         RowBox[{
          RowBox[{"vslice", "[", "\"\<src\>\"", "]"}], ",", " ", 
          RowBox[{
           RowBox[{"Abs", "[", 
            RowBox[{
             RowBox[{"#", "\[LeftDoubleBracket]", 
              RowBox[{"\"\<c\>\"", ",", " ", "1", ",", " ", "5"}], 
              "\[RightDoubleBracket]"}], " ", "-", " ", 
             RowBox[{"0", " ", "Degree"}]}], " ", "]"}], "&"}]}], "]"}], 
        "\[LeftDoubleBracket]", 
        RowBox[{"1", ";;", "1"}], "\[RightDoubleBracket]"}]}], 
      "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
    "all", " ", "this", " ", "needs", " ", "to", " ", "be", " ", "set", " ", 
     "for", " ", "callout", " ", "and", " ", "other", " ", "functions", " ", 
     "to", " ", "work", " ", "properly"}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gaits", " ", "=", " ", 
     RowBox[{"Association", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"\"\<brach_up\>\"", " ", "->", " ", 
        RowBox[{"uphill", "\[LeftDoubleBracket]", 
         RowBox[{"1", ",", " ", "\"\<c\>\"", ",", " ", "1"}], 
         "\[RightDoubleBracket]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"\"\<brach_down_pass\>\"", " ", "->", " ", 
        RowBox[{"passive", "\[LeftDoubleBracket]", 
         RowBox[{"2", ",", " ", "\"\<c\>\"", ",", " ", "1"}], 
         "\[RightDoubleBracket]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"\"\<walk_down_pass\>\"", " ", "->", " ", 
        RowBox[{"passive", "\[LeftDoubleBracket]", 
         RowBox[{"1", ",", " ", "\"\<c\>\"", ",", " ", "1"}], 
         "\[RightDoubleBracket]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"\"\<walk_up\>\"", " ", "->", " ", 
        RowBox[{"uphill", "\[LeftDoubleBracket]", 
         RowBox[{"2", ",", " ", "\"\<c\>\"", ",", " ", "1"}], 
         "\[RightDoubleBracket]"}]}]}], "\[IndentingNewLine]", "]"}]}], ";"}],
    "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gaitcolors", " ", "=", " ", 
     RowBox[{"ConstantArray", "[", 
      RowBox[{"Black", ",", " ", 
       RowBox[{"Length", "@", "gaits"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gaitlbls", " ", "=", " ", 
     RowBox[{"AssociationThread", "[", 
      RowBox[{
       RowBox[{"Keys", "@", "gaits"}], " ", "->", " ", 
       RowBox[{"{", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"texcirc", "[", 
          RowBox[{"3", ",", " ", 
           RowBox[{
           "gaitcolors", "\[LeftDoubleBracket]", "1", 
            "\[RightDoubleBracket]"}]}], "]"}], ",", "\[IndentingNewLine]", 
         RowBox[{"cpass", "[", 
          RowBox[{"2", ",", " ", 
           RowBox[{
           "gaitcolors", "\[LeftDoubleBracket]", "2", 
            "\[RightDoubleBracket]"}]}], "]"}], ",", " ", 
         "\[IndentingNewLine]", 
         RowBox[{"cseed", "[", 
          RowBox[{"1", ",", " ", 
           RowBox[{
           "gaitcolors", "\[LeftDoubleBracket]", "3", 
            "\[RightDoubleBracket]"}]}], "]"}], ",", "\[IndentingNewLine]", 
         RowBox[{"texcirc", "[", 
          RowBox[{"0", ",", " ", 
           RowBox[{
           "gaitcolors", "\[LeftDoubleBracket]", "4", 
            "\[RightDoubleBracket]"}]}], "]"}]}], "\[IndentingNewLine]", 
        "}"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gaitcolors", " ", "=", " ", 
     RowBox[{
      RowBox[{"vslice", "[", "\"\<cf\>\"", "]"}], " ", "/@", " ", 
      RowBox[{"gaits", "\[LeftDoubleBracket]", 
       RowBox[{"All", ",", " ", "7"}], "\[RightDoubleBracket]"}]}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"points", " ", "=", " ", 
     RowBox[{
      RowBox[{
       RowBox[{"#", "/", 
        RowBox[{"{", 
         RowBox[{"Degree", ",", " ", "1", ",", " ", "1", ",", " ", "1"}], 
         "}"}]}], "&"}], " ", "/@", " ", 
      RowBox[{"Values", "@", 
       RowBox[{"gaits", "\[LeftDoubleBracket]", 
        RowBox[{"All", ",", " ", "s"}], "\[RightDoubleBracket]"}]}]}]}], 
    ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"seed", " ", "=", " ", "3"}], ";"}]}]}]], "Input",
 CellLabel->
  "In[85]:=",ExpressionUUID->"334ba5ee-6b02-4ea7-836c-56659575f651"]
}, Open  ]],

Cell[CellGroupData[{

Cell["motions", \
"Section",ExpressionUUID->"896e1b6d-7389-4a47-937a-5d235866f9ad"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"CompassGait", "[", 
    RowBox[{
     RowBox[{"\"\<e\>\"", " ", "->", " ", 
      RowBox[{"{", 
       RowBox[{"Fourier", ",", " ", "2"}], "}"}]}], ",", " ", 
     RowBox[{"\"\<d\>\"", " ", "->", " ", "0"}]}], "]"}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"T", " ", "=", " ", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"#", " ", "\[Equal]", " ", "0"}], ",", " ", 
          "\"\<t = \\\\SI{0}{t_0}\>\"", ",", " ", 
          RowBox[{"StringForm", "[", 
           RowBox[{"\"\<\\\\SI{``}{t_0}\>\"", ",", " ", 
            RowBox[{"ToString", "@", 
             RowBox[{"NumberForm", "[", 
              RowBox[{
               RowBox[{"N", "@", "#"}], ",", " ", 
               RowBox[{"{", 
                RowBox[{"3", ",", "3"}], "}"}]}], "]"}]}]}], "]"}]}], "]"}], 
        "&"}], ")"}], ",", " ", "False"}], "}"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"g", " ", "=", " ", 
   RowBox[{"KeyValueMap", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"(", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"f", " ", "=", " ", 
         RowBox[{
          RowBox[{"StringTemplate", "[", "\"\<cgw-opt-F-2-Z_``\>\"", "]"}], 
          "[", "#1", "]"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"x", ",", " ", "c"}], "}"}], " ", "=", " ", 
         RowBox[{"Values", "@", 
          RowBox[{
           RowBox[{"CompassGaitSim", "[", "#2", "]"}], "\[LeftDoubleBracket]", 
           RowBox[{"{", 
            RowBox[{"\"\<x[t]\>\"", ",", " ", "\"\<c[t]\>\""}], "}"}], 
           "\[RightDoubleBracket]"}]}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"g", " ", "=", " ", 
         RowBox[{"BLBipedTimeGrid", "[", 
          RowBox[{"x", ",", " ", "c", ",", " ", 
           RowBox[{"\"\<n\>\"", " ", "->", " ", 
            RowBox[{"Automatic", " ", "->", " ", "4"}]}], ",", " ", 
           RowBox[{"\"\<T\>\"", " ", "->", " ", "T"}]}], "]"}]}], ";", 
        "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"g", "\[LeftDoubleBracket]", 
          RowBox[{"1", ",", " ", "2", ",", " ", "1"}], 
          "\[RightDoubleBracket]"}], " ", "=", " ", 
         RowBox[{"Overlay", "[", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{"g", "\[LeftDoubleBracket]", 
              RowBox[{"1", ",", " ", "2", ",", " ", "1"}], 
              "\[RightDoubleBracket]"}], ",", " ", 
             RowBox[{"mag", "[", 
              RowBox[{
               RowBox[{"gaitlbls", "[", "#1", "]"}], ",", " ", "3"}], "]"}]}],
             "}"}], ",", " ", "\[IndentingNewLine]", 
           RowBox[{"Alignment", "\[Rule]", " ", 
            RowBox[{"{", 
             RowBox[{"Center", ",", " ", "Bottom"}], "}"}]}]}], 
          "\[IndentingNewLine]", "]"}]}], ";", "\[IndentingNewLine]", 
        "\[IndentingNewLine]", 
        RowBox[{"svgsave", "[", 
         RowBox[{"f", ",", " ", "g"}], "]"}], ";", "\[IndentingNewLine]", 
        "g"}], "\[IndentingNewLine]", ")"}], "&"}], ",", 
     "\[IndentingNewLine]", "gaits"}], "\[IndentingNewLine]", "]"}]}], 
  ";"}]}], "Input",
 CellLabel->
  "In[94]:=",ExpressionUUID->"9f4345a7-6ae0-4c36-b794-a364fef5109a"]
}, Open  ]],

Cell[CellGroupData[{

Cell["slope-time", \
"Section",ExpressionUUID->"5655388d-b377-448a-a296-00aeae22cfbf"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"i", " ", "=", 
   RowBox[{"in", "[", 
    RowBox[{"{", 
     RowBox[{"\"\<\[Sigma]\>\"", ",", " ", "\"\<\[Tau]\>\""}], "}"}], "]"}]}],
   ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pts", " ", "=", " ", 
   RowBox[{"vslice", "\[LeftDoubleBracket]", 
    RowBox[{"\"\<slice\>\"", ",", " ", "1", ",", " ", "All", ",", " ", "i"}], 
    "\[RightDoubleBracket]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"shade", " ", "=", " ", 
   RowBox[{"vslice", "[", 
    RowBox[{"\"\<shade\>\"", ",", " ", "\"\<\[Tau]\>\""}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"bar", " ", "=", " ", 
    RowBox[{"vslice", "[", "\"\<legend\>\"", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"callopts", " ", "=", " ", 
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"{", "Above", "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{"{", "Below", "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"Automatic", ",", " ", 
        RowBox[{"points", "\[LeftDoubleBracket]", 
         RowBox[{"seed", ",", " ", "i"}], "\[RightDoubleBracket]"}], ",", " ", 
        RowBox[{"LeaderSize", "\[Rule]", 
         RowBox[{"{", 
          RowBox[{"15", ",", 
           RowBox[{"65", " ", "Degree"}], ",", "Automatic"}], "}"}]}], ",", 
        " ", 
        RowBox[{"Appearance", "\[Rule]", "\"\<Frame\>\""}], ",", " ", 
        RowBox[{"CalloutMarker", "\[Rule]", "\"\<Box\>\""}]}], "}"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"After", ",", " ", 
        RowBox[{"LeaderSize", " ", "->", " ", "7"}]}], "}"}]}], 
     "\[IndentingNewLine]", "}"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"pts0", " ", "=", " ", 
    RowBox[{"callout", "[", 
     RowBox[{"i", ",", " ", "callopts"}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"g", " ", "=", " ", 
   RowBox[{"Show", "[", "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
      RowBox[{"main", " ", "plot", " ", 
       RowBox[{"w", "/", " ", "color"}]}], "-", 
      RowBox[{"coded", " ", "line"}]}], " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"LabelFrameTicks", "@", 
      RowBox[{"ListLinePlot", "[", 
       RowBox[{"pts", ",", " ", "\[IndentingNewLine]", 
        RowBox[{"Prolog", "\[Rule]", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"Thickness", "[", "0.01", "]"}], ",", " ", 
           RowBox[{"Opacity", "[", "0.75", "]"}], ",", " ", "shade"}], 
          "}"}]}], ",", "\[IndentingNewLine]", 
        RowBox[{"Ticks", " ", "->", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"0", ",", " ", 
             RowBox[{"-", "90"}], ",", " ", 
             RowBox[{"-", "180"}]}], "}"}], ",", " ", "Automatic"}], "}"}]}], 
        ",", "\[IndentingNewLine]", 
        RowBox[{"GridLines", "\[Rule]", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"{", 
              RowBox[{"#", ",", " ", "Dashed"}], "}"}], "&"}], " ", "/@", " ", 
            RowBox[{"{", 
             RowBox[{"0", ",", " ", 
              RowBox[{"-", "90"}], ",", " ", 
              RowBox[{"-", "180"}]}], "}"}]}], ",", " ", "None"}], "}"}]}], 
        ",", "\[IndentingNewLine]", 
        RowBox[{"FrameLabel", "\[Rule]", 
         RowBox[{"mag", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{"lb", "[", "\"\<\[Sigma]\>\"", "]"}], ",", " ", 
             RowBox[{"lb", "[", "\"\<\[Tau]\>\"", "]"}]}], "}"}], ",", " ", 
           "0.85"}], "]"}]}], ",", "\[IndentingNewLine]", "opts2D", ",", 
        "\[IndentingNewLine]", 
        RowBox[{"Epilog", "\[Rule]", " ", 
         RowBox[{"{", 
          RowBox[{"Inset", "[", 
           RowBox[{"bar", ",", " ", 
            RowBox[{"Scaled", "@", 
             RowBox[{"{", 
              RowBox[{"0.46", ",", " ", "0.26"}], "}"}]}], ",", " ", 
            RowBox[{"Background", "\[Rule]", "White"}]}], "]"}], "}"}]}]}], 
       "\[IndentingNewLine]", "]"}]}], ",", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{"points", " ", "of", " ", "interest"}], " ", "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"ListPlot", "[", 
      RowBox[{"pts0", ",", " ", 
       RowBox[{"PlotStyle", "\[Rule]", 
        RowBox[{"PointSize", "@", "Large"}]}], ",", " ", 
       RowBox[{"LabelingSize", "\[Rule]", "Full"}]}], "]"}]}], 
    "\[IndentingNewLine]", "]"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"svgsave", "[", 
   RowBox[{"\"\<velocity-slice-time\>\"", ",", " ", "g"}], "]"}], 
  ";"}]}], "Input",
 CellLabel->
  "In[97]:=",ExpressionUUID->"8c6dbc11-00b4-495a-ad5d-93b00cd4bb36"]
}, Open  ]],

Cell[CellGroupData[{

Cell["slope-cost", \
"Section",ExpressionUUID->"44292f34-deb4-4c13-9f47-8d912d5fc0e7"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"i", " ", "=", 
   RowBox[{"in", "[", 
    RowBox[{"{", 
     RowBox[{"\"\<\[Sigma]\>\"", ",", " ", "\"\<J\>\""}], "}"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pts", " ", "=", " ", 
   RowBox[{"vslice", "\[LeftDoubleBracket]", 
    RowBox[{"\"\<slice\>\"", ",", " ", "1", ",", " ", "All", ",", " ", "i"}], 
    "\[RightDoubleBracket]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"shade", " ", "=", " ", 
   RowBox[{"vslice", "[", 
    RowBox[{"\"\<shade\>\"", ",", " ", "\"\<J\>\""}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"bar", " ", "=", " ", 
   RowBox[{"vslice", "[", "\"\<legend\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"qnts", " ", "=", " ", 
    RowBox[{"vslice", "[", "\"\<qnts\>\"", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"callopts", " ", "=", " ", 
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"{", "Automatic", "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{"{", "Above", "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"Above", ",", " ", 
        RowBox[{"points", "\[LeftDoubleBracket]", 
         RowBox[{"seed", ",", " ", "i"}], "\[RightDoubleBracket]"}], ",", " ", 
        RowBox[{"LeaderSize", "\[Rule]", 
         RowBox[{"{", 
          RowBox[{"40", ",", " ", 
           RowBox[{"125", " ", "Degree"}], ",", " ", "Automatic"}], "}"}]}], 
        ",", " ", 
        RowBox[{"Appearance", "\[Rule]", "\"\<Frame\>\""}], ",", " ", 
        RowBox[{"CalloutMarker", "\[Rule]", "\"\<Box\>\""}]}], "}"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"{", "Automatic", "}"}]}], "\[IndentingNewLine]", "}"}]}], 
   ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"pts0", " ", "=", " ", 
    RowBox[{"callout", "[", 
     RowBox[{"i", ",", " ", "callopts"}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"g", " ", "=", " ", 
   RowBox[{"Show", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"LabelFrameTicks", "@", 
      RowBox[{"ListLinePlot", "[", 
       RowBox[{"pts", ",", " ", "\[IndentingNewLine]", 
        RowBox[{"Prolog", "\[Rule]", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"Thickness", "[", "0.01", "]"}], ",", " ", 
           RowBox[{"Opacity", "[", "0.75", "]"}], ",", " ", "shade"}], 
          "}"}]}], ",", " ", "\[IndentingNewLine]", 
        RowBox[{"Ticks", " ", "->", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{"0", ",", " ", 
             RowBox[{"-", "90"}], ",", " ", 
             RowBox[{"-", "180"}]}], "}"}], ",", " ", "Automatic"}], "}"}]}], 
        ",", "\[IndentingNewLine]", 
        RowBox[{"Epilog", "\[Rule]", " ", 
         RowBox[{"{", 
          RowBox[{"Inset", "[", 
           RowBox[{"bar", ",", " ", 
            RowBox[{"Scaled", "@", 
             RowBox[{"{", 
              RowBox[{"0.46", ",", " ", "0.72"}], "}"}]}], ",", " ", 
            RowBox[{"Background", "\[Rule]", "White"}]}], "]"}], "}"}]}], ",",
         "\[IndentingNewLine]", 
        RowBox[{"GridLines", "\[Rule]", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"{", 
              RowBox[{"#", ",", " ", "Dashed"}], "}"}], "&"}], " ", "/@", " ", 
            RowBox[{"{", 
             RowBox[{"0", ",", " ", 
              RowBox[{"-", "90"}], ",", " ", 
              RowBox[{"-", "180"}]}], "}"}]}], ",", " ", "qnts"}], "}"}]}], 
        ",", "\[IndentingNewLine]", 
        RowBox[{"FrameLabel", "\[Rule]", 
         RowBox[{"mag", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{"lb", "[", "\"\<\[Sigma]\>\"", "]"}], ",", " ", 
             RowBox[{"lb", "[", "\"\<J\>\"", "]"}]}], "}"}], ",", " ", 
           "0.85"}], "]"}]}], ",", "\[IndentingNewLine]", "opts2D"}], 
       "\[IndentingNewLine]", "]"}]}], ",", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"ListPlot", "[", 
      RowBox[{"pts0", ",", " ", 
       RowBox[{"PlotStyle", "\[Rule]", 
        RowBox[{"PointSize", "@", "Large"}]}], ",", " ", 
       RowBox[{"LabelingSize", "\[Rule]", "Full"}]}], "]"}]}], 
    "\[IndentingNewLine]", "]"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"svgsave", "[", 
   RowBox[{"\"\<velocity-slice-cost\>\"", ",", " ", "g"}], "]"}], 
  ";"}]}], "Input",
 CellLabel->"In[105]:=",ExpressionUUID->"64a08420-15bc-4abf-abbc-8672491c9f54"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Constant-Slope", "Subchapter",
 CellChangeTimes->{{3.886399576714114*^9, 
  3.8863995772839766`*^9}},ExpressionUUID->"bb3591a6-ee35-4373-b4b7-\
1ac2ab5b18d4"],

Cell[CellGroupData[{

Cell["slice-specific data", \
"Section",ExpressionUUID->"2c24656e-716b-4b37-a224-4ad9d4a177bc"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"level", "-", 
    RowBox[{"ground", " ", "walking", " ", "gait"}]}], " ", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"level", " ", "=", " ", 
     RowBox[{
      RowBox[{"\[Sigma]slice", "[", "\"\<src\>\"", "]"}], "[", 
      RowBox[{"{", "0", "}"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
    "all", " ", "this", " ", "needs", " ", "to", " ", "be", " ", "set", " ", 
     "for", " ", "callout", " ", "and", " ", "other", " ", "functions", " ", 
     "to", " ", "work", " ", "properly"}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gaits", " ", "=", " ", 
     RowBox[{"Association", "[", 
      RowBox[{"\"\<walk_up\>\"", " ", "->", " ", 
       RowBox[{"level", "\[LeftDoubleBracket]", 
        RowBox[{"\"\<c\>\"", ",", " ", "1"}], "\[RightDoubleBracket]"}]}], 
      "]"}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gaitcolors", " ", "=", " ", 
     RowBox[{"ConstantArray", "[", 
      RowBox[{"Black", ",", " ", 
       RowBox[{"Length", "@", "gaits"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gaitlbls", " ", "=", " ", 
     RowBox[{"AssociationThread", "[", 
      RowBox[{
       RowBox[{"Keys", "@", "gaits"}], " ", "->", " ", 
       RowBox[{"{", 
        RowBox[{"cseed", "[", 
         RowBox[{"0", ",", " ", 
          RowBox[{
          "gaitcolors", "\[LeftDoubleBracket]", "1", 
           "\[RightDoubleBracket]"}]}], "]"}], "}"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gaitcolors", " ", "=", " ", 
     RowBox[{
      RowBox[{"\[Sigma]slice", "[", "\"\<cf\>\"", "]"}], " ", "/@", " ", 
      RowBox[{"gaits", "\[LeftDoubleBracket]", 
       RowBox[{"All", ",", " ", "7"}], "\[RightDoubleBracket]"}]}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"points", " ", "=", " ", 
     RowBox[{
      RowBox[{
       RowBox[{"#", "/", 
        RowBox[{"{", 
         RowBox[{"Degree", ",", " ", "1", ",", " ", "1", ",", " ", "1"}], 
         "}"}]}], "&"}], " ", "/@", " ", 
      RowBox[{"Values", "@", 
       RowBox[{"gaits", "\[LeftDoubleBracket]", 
        RowBox[{"All", ",", " ", "s"}], "\[RightDoubleBracket]"}]}]}]}], 
    ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"seed", " ", "=", " ", "1"}], ";"}]}]}]], "Input",
 CellLabel->"In[114]:=",ExpressionUUID->"7fb1772d-b75c-4aa6-a631-3f98fda9ad6b"]
}, Open  ]],

Cell[CellGroupData[{

Cell["velocity-time", "Section",
 CellChangeTimes->{{3.8863995872395134`*^9, 
  3.886399591017172*^9}},ExpressionUUID->"0684210a-18b1-40c0-8693-\
c3c0ef696462"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"i", " ", "=", 
   RowBox[{"in", "[", 
    RowBox[{"{", 
     RowBox[{"\"\<v\>\"", ",", " ", "\"\<\[Tau]\>\""}], "}"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pts", " ", "=", " ", 
   RowBox[{"\[Sigma]slice", "\[LeftDoubleBracket]", 
    RowBox[{"\"\<slice\>\"", ",", " ", "1", ",", " ", "All", ",", " ", "i"}], 
    "\[RightDoubleBracket]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"shade", " ", "=", " ", 
   RowBox[{"\[Sigma]slice", "[", 
    RowBox[{"\"\<shade\>\"", ",", " ", "\"\<\[Tau]\>\""}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"bar", " ", "=", " ", 
    RowBox[{"\[Sigma]slice", "[", "\"\<legend\>\"", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"callopts", " ", "=", " ", 
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{"Automatic", ",", " ", 
       RowBox[{"points", "\[LeftDoubleBracket]", 
        RowBox[{"seed", ",", " ", "i"}], "\[RightDoubleBracket]"}], ",", " ", 
       
       RowBox[{"LeaderSize", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"25", ",", 
          RowBox[{"110", " ", "Degree"}], ",", "Automatic"}], "}"}]}], ",", 
       " ", 
       RowBox[{"Appearance", "\[Rule]", "\"\<Frame\>\""}], ",", " ", 
       RowBox[{"CalloutMarker", "\[Rule]", "\"\<Box\>\""}], ",", " ", 
       RowBox[{"Background", " ", "->", " ", "White"}]}], "}"}], 
     "\[IndentingNewLine]", "}"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"pts0", " ", "=", " ", 
    RowBox[{"callout", "[", 
     RowBox[{"i", ",", " ", "callopts"}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"g", " ", "=", " ", 
   RowBox[{"Show", "[", "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{
      RowBox[{"main", " ", "plot", " ", 
       RowBox[{"w", "/", " ", "color"}]}], "-", 
      RowBox[{"coded", " ", "line"}]}], " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"LabelFrameTicks", "@", 
      RowBox[{"ListLinePlot", "[", 
       RowBox[{"pts", ",", " ", "\[IndentingNewLine]", 
        RowBox[{"Prolog", "\[Rule]", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"Thickness", "[", "0.01", "]"}], ",", " ", 
           RowBox[{"Opacity", "[", "0.75", "]"}], ",", " ", "shade"}], 
          "}"}]}], ",", "\[IndentingNewLine]", 
        RowBox[{"GridLines", "\[Rule]", " ", 
         RowBox[{"{", 
          RowBox[{"Automatic", ",", " ", 
           RowBox[{"{", "1.5", "}"}]}], "}"}]}], ",", "\[IndentingNewLine]", 
        RowBox[{"GridLinesStyle", "\[Rule]", 
         RowBox[{"{", 
          RowBox[{"Dashed", ",", " ", "Automatic"}], "}"}]}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{"FrameLabel", "\[Rule]", 
         RowBox[{"mag", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{"lb", "[", "\"\<v\>\"", "]"}], ",", " ", 
             RowBox[{"lb", "[", "\"\<\[Tau]\>\"", "]"}]}], "}"}], ",", " ", 
           "0.85"}], "]"}]}], ",", "\[IndentingNewLine]", "opts2D", ",", 
        "\[IndentingNewLine]", 
        RowBox[{"Epilog", "\[Rule]", " ", 
         RowBox[{"{", 
          RowBox[{"Inset", "[", 
           RowBox[{"bar", ",", " ", 
            RowBox[{"Scaled", "@", 
             RowBox[{"{", 
              RowBox[{"0.65", ",", " ", "0.72"}], "}"}]}], ",", " ", 
            RowBox[{"Background", "\[Rule]", "White"}]}], "]"}], "}"}]}]}], 
       "\[IndentingNewLine]", "]"}]}], ",", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{"points", " ", "of", " ", "interest"}], " ", "*)"}], 
     "\[IndentingNewLine]", 
     RowBox[{"ListPlot", "[", 
      RowBox[{"pts0", ",", " ", 
       RowBox[{"PlotStyle", "\[Rule]", 
        RowBox[{"PointSize", "@", "Large"}]}], ",", " ", 
       RowBox[{"LabelingSize", "\[Rule]", "Full"}]}], "]"}]}], 
    "\[IndentingNewLine]", "]"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"svgsave", "[", 
   RowBox[{"\"\<slope-slice-time\>\"", ",", " ", "g"}], "]"}], 
  ";"}]}], "Input",
 CellLabel->"In[121]:=",ExpressionUUID->"cbbe9796-f7d4-4413-8404-c0cbb8f99042"]
}, Open  ]],

Cell[CellGroupData[{

Cell["velocity-cost", "Section",
 CellChangeTimes->{{3.886399599626642*^9, 
  3.8863996005592413`*^9}},ExpressionUUID->"daa9b6ba-00ad-4768-baae-\
55b87f74f5f7"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"i", " ", "=", 
   RowBox[{"in", "[", 
    RowBox[{"{", 
     RowBox[{"\"\<v\>\"", ",", " ", "\"\<J\>\""}], "}"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pts", " ", "=", " ", 
   RowBox[{"\[Sigma]slice", "\[LeftDoubleBracket]", 
    RowBox[{"\"\<slice\>\"", ",", " ", "1", ",", " ", "All", ",", " ", "i"}], 
    "\[RightDoubleBracket]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"shade", " ", "=", " ", 
   RowBox[{"\[Sigma]slice", "[", 
    RowBox[{"\"\<shade\>\"", ",", " ", "\"\<J\>\""}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"bar", " ", "=", " ", 
   RowBox[{"\[Sigma]slice", "[", "\"\<legend\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"qnts", " ", "=", " ", 
    RowBox[{"\[Sigma]slice", "[", "\"\<qnts\>\"", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"callopts", " ", "=", " ", 
    RowBox[{"{", 
     RowBox[{"{", 
      RowBox[{"Above", ",", " ", 
       RowBox[{"points", "\[LeftDoubleBracket]", 
        RowBox[{"seed", ",", " ", "i"}], "\[RightDoubleBracket]"}], ",", " ", 
       
       RowBox[{"Appearance", "\[Rule]", "\"\<Frame\>\""}], ",", " ", 
       RowBox[{"CalloutMarker", "\[Rule]", "\"\<Box\>\""}], ",", " ", 
       RowBox[{"Background", " ", "->", " ", "White"}]}], "}"}], "}"}]}], 
   ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"pts0", " ", "=", " ", 
    RowBox[{"callout", "[", 
     RowBox[{"i", ",", " ", "callopts"}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"g", " ", "=", " ", 
   RowBox[{"Show", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"LabelFrameTicks", "@", 
      RowBox[{"ListLinePlot", "[", 
       RowBox[{"pts", ",", " ", "\[IndentingNewLine]", 
        RowBox[{"Prolog", "\[Rule]", " ", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"Thickness", "[", "0.01", "]"}], ",", " ", 
           RowBox[{"Opacity", "[", "0.75", "]"}], ",", " ", "shade"}], 
          "}"}]}], ",", " ", "\[IndentingNewLine]", 
        RowBox[{"Epilog", "\[Rule]", " ", 
         RowBox[{"{", 
          RowBox[{"Inset", "[", 
           RowBox[{"bar", ",", " ", 
            RowBox[{"Scaled", "@", 
             RowBox[{"{", 
              RowBox[{"0.36", ",", " ", "0.72"}], "}"}]}], ",", " ", 
            RowBox[{"Background", " ", "->", " ", "White"}]}], "]"}], "}"}]}],
         ",", "\[IndentingNewLine]", 
        RowBox[{"GridLines", "\[Rule]", " ", 
         RowBox[{"{", 
          RowBox[{"Automatic", ",", " ", "qnts"}], "}"}]}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{"GridLinesStyle", "\[Rule]", " ", 
         RowBox[{"{", 
          RowBox[{"Dashed", ",", " ", "Automatic"}], "}"}]}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{"FrameLabel", "\[Rule]", 
         RowBox[{"mag", "[", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{"lb", "[", "\"\<v\>\"", "]"}], ",", " ", 
             RowBox[{"lb", "[", "\"\<J\>\"", "]"}]}], "}"}], ",", " ", 
           "0.85"}], "]"}]}], ",", "\[IndentingNewLine]", "opts2D"}], 
       "\[IndentingNewLine]", "]"}]}], ",", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"ListPlot", "[", 
      RowBox[{"pts0", ",", " ", 
       RowBox[{"PlotStyle", "\[Rule]", 
        RowBox[{"PointSize", "@", "Large"}]}], ",", " ", 
       RowBox[{"LabelingSize", "\[Rule]", "Full"}]}], "]"}]}], 
    "\[IndentingNewLine]", "]"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"svgsave", "[", 
   RowBox[{"\"\<slope-slice-cost\>\"", ",", " ", "g"}], "]"}], 
  ";"}]}], "Input",
 CellLabel->"In[129]:=",ExpressionUUID->"8b2b5be6-7141-4372-8dd6-1a76db301e32"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Both in 3D", \
"Subchapter",ExpressionUUID->"196c84f4-097b-4044-a31a-dc1a802b79e2"],

Cell[CellGroupData[{

Cell["slice-specific data", \
"Section",ExpressionUUID->"bbc2fff3-7564-438a-90f6-994930e6f518"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"downhill", " ", 
    RowBox[{"(", "passive", ")"}], " ", 
    RowBox[{"gaits", ":", " ", 
     RowBox[{
     "there", " ", "are", " ", "two", " ", "passive", " ", "gaits", " ", "in",
       " ", "this", " ", "slice"}]}]}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", " ", 
   RowBox[{
    RowBox[{"watch", " ", 
     RowBox[{"out", "!"}], " ", "the", " ", "indices", " ", "are", " ", 
     "hard"}], "-", 
    RowBox[{"coded", " ", "based", " ", "on", " ", "step", " ", "size"}]}], 
   " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"passive", " ", "=", " ", 
     RowBox[{
      RowBox[{"SortGaits", "[", 
       RowBox[{
        RowBox[{"vslice", "[", "\"\<src\>\"", "]"}], ",", " ", 
        RowBox[{
         RowBox[{"#", "\[LeftDoubleBracket]", 
          RowBox[{"\"\<c\>\"", ",", " ", "1", ",", " ", "7"}], 
          "\[RightDoubleBracket]"}], "&"}]}], "]"}], "\[LeftDoubleBracket]", 
      RowBox[{"1", ";;", "2"}], "\[RightDoubleBracket]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"level", "-", 
     RowBox[{"ground", " ", "gaits"}]}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"level", " ", "=", " ", 
     RowBox[{
      RowBox[{"SortGaits", "[", 
       RowBox[{
        RowBox[{"vslice", "[", "\"\<src\>\"", "]"}], ",", " ", 
        RowBox[{
         RowBox[{"Abs", "[", 
          RowBox[{
           RowBox[{"#", "\[LeftDoubleBracket]", 
            RowBox[{"\"\<c\>\"", ",", " ", "1", ",", " ", "5"}], 
            "\[RightDoubleBracket]"}], " ", "-", " ", 
           RowBox[{"0", " ", "Degree"}]}], " ", "]"}], "&"}]}], "]"}], 
      "\[LeftDoubleBracket]", 
      RowBox[{"1", ";;", "1"}], "\[RightDoubleBracket]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
    "all", " ", "this", " ", "needs", " ", "to", " ", "be", " ", "set", " ", 
     "for", " ", "callout", " ", "and", " ", "other", " ", "functions", " ", 
     "to", " ", "work", " ", "properly"}], " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gaits", " ", "=", " ", 
     RowBox[{"Association", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"\"\<brach_down_pass\>\"", " ", "->", " ", 
        RowBox[{"passive", "\[LeftDoubleBracket]", 
         RowBox[{"2", ",", " ", "\"\<c\>\"", ",", " ", "1"}], 
         "\[RightDoubleBracket]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"\"\<walk_down_pass\>\"", " ", "->", " ", 
        RowBox[{"passive", "\[LeftDoubleBracket]", 
         RowBox[{"1", ",", " ", "\"\<c\>\"", ",", " ", "1"}], 
         "\[RightDoubleBracket]"}]}], ",", "\[IndentingNewLine]", 
       RowBox[{"\"\<walk_up\>\"", " ", "->", " ", 
        RowBox[{"level", "\[LeftDoubleBracket]", 
         RowBox[{"1", ",", " ", "\"\<c\>\"", ",", " ", "1"}], 
         "\[RightDoubleBracket]"}]}]}], "\[IndentingNewLine]", "]"}]}], ";"}],
    "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gaitcolors", " ", "=", " ", 
     RowBox[{"ConstantArray", "[", 
      RowBox[{"Black", ",", " ", 
       RowBox[{"Length", "@", "gaits"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gaitlbls", " ", "=", " ", 
     RowBox[{"AssociationThread", "[", 
      RowBox[{
       RowBox[{"Keys", "@", "gaits"}], " ", "->", " ", 
       RowBox[{"{", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"cpass", "[", 
          RowBox[{"2", ",", " ", 
           RowBox[{
           "gaitcolors", "\[LeftDoubleBracket]", "1", 
            "\[RightDoubleBracket]"}]}], "]"}], ",", " ", 
         "\[IndentingNewLine]", 
         RowBox[{"cseed", "[", 
          RowBox[{"1", ",", " ", 
           RowBox[{
           "gaitcolors", "\[LeftDoubleBracket]", "2", 
            "\[RightDoubleBracket]"}]}], "]"}], ",", "\[IndentingNewLine]", 
         RowBox[{"texcirc", "[", 
          RowBox[{"0", ",", " ", 
           RowBox[{
           "gaitcolors", "\[LeftDoubleBracket]", "3", 
            "\[RightDoubleBracket]"}]}], "]"}]}], "\[IndentingNewLine]", 
        "}"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"points", " ", "=", " ", 
     RowBox[{
      RowBox[{
       RowBox[{"#", "/", 
        RowBox[{"{", 
         RowBox[{"Degree", ",", " ", "1", ",", " ", "1", ",", " ", "1"}], 
         "}"}]}], "&"}], " ", "/@", " ", 
      RowBox[{"Values", "@", 
       RowBox[{"gaits", "\[LeftDoubleBracket]", 
        RowBox[{"All", ",", " ", "s"}], "\[RightDoubleBracket]"}]}]}]}], 
    ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"seed", " ", "=", " ", "2"}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"scale", " ", "=", " ", "2"}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"gaitlbls", " ", "=", " ", 
     RowBox[{
      RowBox[{
       RowBox[{"mag", "[", 
        RowBox[{"#", ",", " ", 
         RowBox[{"scale", " ", "tickmag"}]}], "]"}], "&"}], " ", "/@", " ", 
      "gaitlbls"}]}], ";"}]}]}]], "Input",
 CellLabel->"In[161]:=",ExpressionUUID->"4ff67143-90cd-4d11-8f2c-7ba7772d901b"]
}, Open  ]],

Cell[CellGroupData[{

Cell["slope-velocity-step-duration", \
"Section",ExpressionUUID->"a75e0954-e6c7-41a9-af8a-cfa1dbd1eb0d"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"i", " ", "=", 
   RowBox[{"in", "[", 
    RowBox[{"{", 
     RowBox[{
     "\"\<v\>\"", ",", " ", "\"\<\[Sigma]\>\"", ",", " ", "\"\<\[Tau]\>\""}], 
     "}"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"slices", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{
    "vslice", ",", " ", "\[Sigma]slice", ",", " ", "pslice1", ",", " ", 
     "pslice2"}], "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pts", " ", "=", " ", 
   RowBox[{
    RowBox[{
     RowBox[{"#", "\[LeftDoubleBracket]", 
      RowBox[{
      "\"\<slice\>\"", ",", " ", "1", ",", " ", "All", ",", " ", "i"}], 
      "\[RightDoubleBracket]"}], "&"}], " ", "/@", " ", "slices"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"pts", "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}], 
    " ", "=", " ", 
    RowBox[{"pts", "\[LeftDoubleBracket]", 
     RowBox[{"3", ",", " ", 
      RowBox[{"12", ";;"}]}], "\[RightDoubleBracket]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"vs", " ", "=", " ", 
    RowBox[{"vslice", "\[LeftDoubleBracket]", 
     RowBox[{"\"\<slice\>\"", ",", " ", "2", ",", " ", 
      RowBox[{"in", "[", "\"\<v\>\"", "]"}]}], "\[RightDoubleBracket]"}]}], 
   ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"callopts", " ", "=", " ", 
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"Automatic", ",", " ", 
        RowBox[{"LeaderSize", " ", "->", " ", 
         RowBox[{"{", 
          RowBox[{"100", ",", " ", 
           RowBox[{"70", "Degree"}], ",", " ", "Automatic"}], "}"}]}], ",", 
        " ", 
        RowBox[{"CalloutStyle", "\[Rule]", 
         RowBox[{"Directive", "[", 
          RowBox[{"Thick", ",", " ", 
           RowBox[{"Lighter", "@", "Black"}]}], "]"}]}]}], "}"}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"Above", ",", " ", 
        RowBox[{"LeaderSize", " ", "->", " ", 
         RowBox[{"{", 
          RowBox[{"80", ",", " ", 
           RowBox[{"75", " ", "Degree"}], ",", " ", "Automatic"}], "}"}]}], 
        ",", " ", 
        RowBox[{"CalloutStyle", "\[Rule]", 
         RowBox[{"Directive", "[", 
          RowBox[{"Thick", ",", " ", 
           RowBox[{"Lighter", "@", "Black"}]}], "]"}]}]}], "}"}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"Below", ",", " ", 
        RowBox[{"LeaderSize", " ", "->", " ", 
         RowBox[{"{", 
          RowBox[{"75", ",", 
           RowBox[{
            RowBox[{"-", "110"}], "Degree"}], ",", " ", "Automatic"}], 
          "}"}]}], ",", " ", 
        RowBox[{"CalloutStyle", "\[Rule]", 
         RowBox[{"Directive", "[", 
          RowBox[{"Thick", ",", " ", 
           RowBox[{"Lighter", "@", "Black"}]}], "]"}]}]}], "}"}]}], 
     "\[IndentingNewLine]", "}"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"pts0", " ", "=", " ", 
    RowBox[{"callout", "[", 
     RowBox[{"i", ",", " ", "callopts"}], "]"}]}], ";"}], 
  "\n"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ticks", " ", "=", " ", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"0", ",", " ", 
         RowBox[{"-", "90"}], ",", " ", 
         RowBox[{"-", "180"}]}], "}"}], ",", 
       RowBox[{"{", 
        RowBox[{"0", ",", " ", "vs", ",", " ", "1", ",", " ", "2"}], "}"}], 
       ",", " ", "Automatic"}], "}"}], "\[LeftDoubleBracket]", "i", 
     "\[RightDoubleBracket]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"axlab", " ", "=", " ", 
   RowBox[{"mag", "[", 
    RowBox[{
     RowBox[{"Values", "[", 
      RowBox[{"lb", "\[LeftDoubleBracket]", 
       RowBox[{"{", 
        RowBox[{
        "\"\<\[Sigma]\>\"", ",", " ", "\"\<v\>\"", ",", " ", 
         "\"\<\[Tau]\>\""}], "}"}], "\[RightDoubleBracket]"}], "]"}], ",", 
     " ", 
     RowBox[{"scale", " ", "tickmag"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"axlab", "\[LeftDoubleBracket]", 
    RowBox[{"in", "[", "\"\<\[Tau]\>\"", "]"}], "\[RightDoubleBracket]"}], 
   " ", "=", " ", 
   RowBox[{"Rotate", "[", 
    RowBox[{
     RowBox[{"axlab", "\[LeftDoubleBracket]", 
      RowBox[{"in", "[", "\"\<\[Tau]\>\"", "]"}], "\[RightDoubleBracket]"}], 
     ",", " ", 
     RowBox[{"90", "Degree"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"axlab", " ", "=", " ", 
    RowBox[{"axlab", "\[LeftDoubleBracket]", "i", "\[RightDoubleBracket]"}]}],
    ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"R", " ", "=", " ", 
    RowBox[{
     RowBox[{"RotationMatrix", "[", 
      RowBox[{
       RowBox[{"0", "Degree"}], ",", " ", 
       RowBox[{"{", 
        RowBox[{"1", ",", " ", "0", ",", " ", "0"}], "}"}]}], "]"}], ".", 
     RowBox[{"RotationMatrix", "[", 
      RowBox[{
       RowBox[{"0", "Degree"}], ",", " ", 
       RowBox[{"{", 
        RowBox[{"0", ",", " ", "1", ",", " ", "0"}], "}"}]}], "]"}], ".", 
     RowBox[{"RotationMatrix", "[", 
      RowBox[{
       RowBox[{"20", "Degree"}], ",", " ", 
       RowBox[{"{", 
        RowBox[{"0", ",", " ", "0", ",", " ", "1"}], "}"}]}], "]"}]}]}], 
   ";"}], "\n"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"g", " ", "=", " ", 
   RowBox[{"Show", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"LabelTicks", "[", 
      RowBox[{
       RowBox[{"ListLinePlot3D", "[", 
        RowBox[{"pts", ",", "\[IndentingNewLine]", 
         RowBox[{"AxesLabel", "\[Rule]", "axlab"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"Boxed", "\[Rule]", "True"}], ",", " ", 
         "\[IndentingNewLine]", 
         RowBox[{"BoxRatios", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{"2", ",", " ", "1", ",", " ", "1"}], "}"}]}], ",", " ", 
         "\[IndentingNewLine]", 
         RowBox[{"ViewPoint", "\[Rule]", " ", 
          RowBox[{"R", ".", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"-", "2"}], ",", " ", "0", ",", " ", "0"}], "}"}]}]}], 
         ",", "\[IndentingNewLine]", 
         RowBox[{"PlotStyle", "\[Rule]", 
          RowBox[{"{", 
           RowBox[{"Black", ",", " ", "Black", ",", " ", 
            RowBox[{"Directive", "[", 
             RowBox[{
              RowBox[{"Thickness", "[", "0.006", "]"}], ",", " ", "RPColor"}],
              "]"}], ",", " ", 
            RowBox[{"Opacity", "[", "0", "]"}]}], "}"}]}], ",", " ", 
         "\[IndentingNewLine]", 
         RowBox[{"ImageSize", "\[Rule]", 
          RowBox[{"2", "full"}]}], ",", "\[IndentingNewLine]", 
         RowBox[{"Ticks", "\[Rule]", "ticks"}], ",", "\[IndentingNewLine]", 
         RowBox[{"PlotRange", "\[Rule]", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"0", ",", " ", "1.2"}], "}"}], ",", " ", "Automatic", 
            ",", " ", "Automatic"}], "}"}]}]}], "\[IndentingNewLine]", "]"}], 
       ",", " ", 
       RowBox[{"TeXLabel", " ", "->", " ", 
        RowBox[{"\"\<m\>\"", " ", "->", " ", 
         RowBox[{"scale", " ", "tickmag"}]}]}]}], "]"}], ",", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{"velocity", " ", "slice"}], " ", "*)"}], "\[IndentingNewLine]", 
     
     RowBox[{"Graphics3D", "[", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"Thickness", "[", "0.01", "]"}], ",", " ", 
        RowBox[{"Opacity", "[", "0.45", "]"}], ",", " ", 
        RowBox[{"EdgeForm", "@", "Black"}], ",", " ", 
        RowBox[{"Opacity", "[", "0.1", "]"}], ",", " ", 
        RowBox[{"GrayLevel", "[", "0.75", "]"}], ",", " ", 
        RowBox[{"InfinitePlane", "[", 
         RowBox[{
          RowBox[{"pts", "\[LeftDoubleBracket]", 
           RowBox[{"1", ",", " ", "1"}], "\[RightDoubleBracket]"}], ",", " ", 
          
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"0", ",", " ", "1", ",", " ", "0"}], "}"}], ",", " ", 
            RowBox[{"{", 
             RowBox[{"0", ",", " ", "0", ",", " ", "1"}], "}"}]}], "}"}]}], 
         "]"}]}], "}"}], "]"}], ",", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{"slope", " ", "slice"}], " ", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"Graphics3D", "[", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"Thickness", "[", "0.01", "]"}], ",", " ", 
        RowBox[{"Opacity", "[", "0.45", "]"}], ",", " ", 
        RowBox[{"EdgeForm", "@", "Black"}], ",", " ", 
        RowBox[{"Opacity", "[", "0.25", "]"}], ",", " ", "Yellow", ",", " ", 
        RowBox[{"InfinitePlane", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"0", ",", " ", "0", ",", " ", "0"}], "}"}], ",", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"1", ",", " ", "0", ",", " ", "0"}], "}"}], ",", " ", 
            RowBox[{"{", 
             RowBox[{"0", ",", " ", "0", ",", " ", "1"}], "}"}]}], "}"}]}], 
         "]"}]}], "}"}], "]"}], ",", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"ListPointPlot3D", "[", 
      RowBox[{"pts0", ",", " ", 
       RowBox[{"PlotStyle", "\[Rule]", 
        RowBox[{"PointSize", "[", "0.015", "]"}]}], ",", " ", 
       RowBox[{"LabelingSize", "\[Rule]", "Full"}]}], "]"}]}], 
    "\[IndentingNewLine]", "]"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"pngsave", "[", 
   RowBox[{"\"\<both-slices-3D\>\"", ",", " ", "g"}], "]"}], ";"}]}], "Input",
 
 CellLabel->
  "(Debug) In[197]:=",ExpressionUUID->"11a77a00-1e4c-4421-ba91-ac8f3328a660"]
}, Open  ]]
}, Open  ]]
}, Open  ]]
},
EvaluatorNames->{"Local" -> {"AutoStartOnLaunch" -> True}},
AutoGeneratedPackage->Automatic,
WindowSize->{767.25, 789.75},
WindowMargins->{{Automatic, 0}, {Automatic, 27.75}},
PrivateNotebookOptions->{"FileOutlineCache"->False},
TaggingRules-><|"TryRealOnly" -> False|>,
CellContext->"Global`",
TrackCellChangeTimes->False,
FrontEndVersion->"13.1 for Linux x86 (64-bit) (June 16, 2022)",
StyleDefinitions->"Default.nb",
ExpressionUUID->"98a644d0-2da4-458b-9ab8-a1dbc41b6f14"
]

